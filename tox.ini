[tox]
envlist = py38, py39, py310
discover = {env:CUSTOM_PYTHON}


[testenv]

deps =
    -r test-reqs.txt
commands =
    python3 --version
    pytest --basetemp="{envtmpdir}"    \
                  --confcutdir=..      \
                  # get number of processors, defaulting to 8
                  -n {env:NUM_PROCS:8} \
                  {posargs}

[pytest]
env_files =
    .test.env

[coverage:run]
omit =
    pyonepassword/opconfig_main.py
